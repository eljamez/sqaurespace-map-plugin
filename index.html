<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Squarespace Map Plugin – Google Maps from Google Sheets</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg: #0f0f12;
      --surface: #18181c;
      --surface-hover: #1f1f24;
      --border: #2a2a30;
      --text: #e4e4e7;
      --text-muted: #a1a1aa;
      --accent: #22c55e;
      --accent-hover: #16a34a;
      --accent-dim: rgba(34, 197, 94, 0.15);
      --radius: 12px;
      --radius-sm: 8px;
      --shadow: 0 4px 24px rgba(0, 0, 0, 0.4);
    }

    * {
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      margin: 0;
      font-family: 'DM Sans', system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
    }

    .wrap {
      max-width: 720px;
      margin: 0 auto;
      padding: 2rem 1.5rem 4rem;
    }

    header {
      text-align: center;
      padding: 3rem 0 2.5rem;
      border-bottom: 1px solid var(--border);
    }

    h1 {
      font-size: clamp(1.75rem, 4vw, 2.25rem);
      font-weight: 700;
      margin: 0 0 0.5rem;
      letter-spacing: -0.02em;
    }

    .tagline {
      color: var(--text-muted);
      font-size: 1.05rem;
      margin: 0;
    }

    section {
      margin: 2.5rem 0;
    }

    h2 {
      font-size: 1.2rem;
      font-weight: 600;
      margin: 0 0 1rem;
      color: var(--text);
    }

    p {
      margin: 0 0 1rem;
      color: var(--text-muted);
    }

    p:last-child {
      margin-bottom: 0;
    }

    a {
      color: var(--accent);
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    code, .code {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.875em;
      background: var(--surface);
      padding: 0.2em 0.5em;
      border-radius: var(--radius-sm);
      border: 1px solid var(--border);
      color: var(--text);
    }

    .card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1.25rem 1.5rem;
      margin: 1rem 0;
      box-shadow: var(--shadow);
    }

    .card h3 {
      font-size: 1rem;
      font-weight: 600;
      margin: 0 0 0.5rem;
      color: var(--text);
    }

    .card p {
      margin: 0;
      font-size: 0.95rem;
    }

    .embed-block {
      position: relative;
      background: #0d0d0f;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1rem 1.25rem;
      margin: 1rem 0;
      overflow-x: auto;
    }

    .embed-block pre {
      margin: 0;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
      line-height: 1.5;
      color: var(--text-muted);
      white-space: pre-wrap;
      word-break: break-all;
    }

    .embed-block .script-url {
      color: var(--accent);
    }

    .btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      font-family: inherit;
      font-size: 0.9rem;
      font-weight: 500;
      padding: 0.6rem 1.1rem;
      border: none;
      border-radius: var(--radius-sm);
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
    }

    .btn:active {
      transform: scale(0.98);
    }

    .btn-copy {
      background: var(--accent);
      color: #0f0f12;
      margin-top: 0.75rem;
    }

    .btn-copy:hover {
      background: var(--accent-hover);
    }

    .btn-copy.copied {
      background: var(--accent-dim);
      color: var(--accent);
    }

    .btn-copy svg {
      width: 1rem;
      height: 1rem;
      flex-shrink: 0;
    }

    ul {
      margin: 0 0 1rem;
      padding-left: 1.25rem;
      color: var(--text-muted);
    }

    ul li {
      margin: 0.25rem 0;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
      margin: 1rem 0;
    }

    th, td {
      text-align: left;
      padding: 0.6rem 0.75rem;
      border-bottom: 1px solid var(--border);
    }

    th {
      font-weight: 600;
      color: var(--text);
    }

    td {
      color: var(--text-muted);
    }

    footer {
      margin-top: 3rem;
      padding-top: 2rem;
      border-top: 1px solid var(--border);
      text-align: center;
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    footer a {
      color: var(--text-muted);
    }

    footer a:hover {
      color: var(--accent);
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Squarespace Map Plugin</h1>
      <p class="tagline">Show a Google Map on your Squarespace site with data from a Google Sheet.</p>
    </header>

    <section>
      <h2>What you need</h2>
      <ul>
        <li><strong>Google Sheet</strong> – Your locations (name, lat/lng or address, description, links). Publish the sheet to the web (File → Share → Publish to web → CSV).</li>
        <li><strong>Google Maps API key</strong> – Enable <a href="https://console.cloud.google.com/apis/library" target="_blank" rel="noopener">Maps JavaScript API</a> (and <a href="https://console.cloud.google.com/apis/library/geocoding-backend.googleapis.com" target="_blank" rel="noopener">Geocoding API</a> if you use the Address column). Create an API key and optionally restrict it by HTTP referrer to your Squarespace domain.</li>
        <li><strong>Hosted script</strong> – The plugin is a single JS file. Host it (e.g. this GitHub Pages site) and use the script URL in the embed code below.</li>
      </ul>
    </section>

    <section>
      <h2>Sheet columns</h2>
      <p>Use these exact headers in row 1. Each row needs <strong>Name</strong> and either <strong>Latitude + Longitude</strong> or <strong>Address</strong>.</p>
      <div class="card">
        <table>
          <thead>
            <tr>
              <th>Column</th>
              <th>Required</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr><td><code>Name</code></td><td>Yes</td><td>Location name</td></tr>
            <tr><td><code>Latitude</code></td><td>Yes*</td><td>e.g. 40.7128</td></tr>
            <tr><td><code>Longitude</code></td><td>Yes*</td><td>e.g. -74.0060</td></tr>
            <tr><td><code>Address</code></td><td>Yes*</td><td>Used if Lat/Lng empty (geocoded)</td></tr>
            <tr><td><code>Description</code></td><td>No</td><td>Info window text</td></tr>
            <tr><td><code>LinkURL</code> / <code>LinkText</code></td><td>No</td><td>Optional link in info window</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <section>
      <h2>Embed code for Squarespace</h2>
      <p>Add a <strong>Code</strong> block on your page and paste the snippet below. Replace <code>YOUR_SHEET_ID</code>, <code>YOUR_GOOGLE_MAPS_API_KEY</code>, and the script URL with your values. The script URL will point to this site if you're using the default setup.</p>
      <div class="embed-block">
        <pre id="embed-snippet"><span class="code-block-start">&lt;div id="sqs-map-container" style="width: 100%; height: 480px;"&gt;&lt;/div&gt;

&lt;script&gt;
  window.MapPluginConfig = {
    sheetId: "YOUR_SHEET_ID",
    apiKey: "YOUR_GOOGLE_MAPS_API_KEY",
    mapContainerId: "sqs-map-container",
    zoomLevel: 10
  };
&lt;/script&gt;
&lt;script src="<span class="script-url" id="script-url-placeholder">SCRIPT_URL</span>" defer&gt;&lt;/script&gt;</span></pre>
      </div>
      <button type="button" class="btn btn-copy" id="copy-btn" aria-label="Copy embed code">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
          <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
        </svg>
        <span id="copy-btn-text">Copy embed code</span>
      </button>
    </section>

    <section>
      <h2>Hosting the plugin script (e.g. GitHub Pages)</h2>
      <p>After running <code>npm run build</code>, the built file is in <code>dist/assets/dev-XXXXXXXX.js</code>. For a stable URL, rename it to <code>map-plugin.js</code> and put it in an <code>assets/</code> folder in the root of this repo (or in <code>docs/assets/</code> if you deploy from the docs folder). The copy button above uses your current page URL so the script src works when this page is served from GitHub Pages.</p>
    </section>

    <section>
      <h2>Optional: Map ID (advanced markers)</h2>
      <p>For <a href="https://developers.google.com/maps/documentation/javascript/get-map-id" target="_blank" rel="noopener">Cloud-based map styling</a> and Advanced Markers, create a Map ID in Google Cloud (Map Management), then add it to the config:</p>
      <div class="embed-block">
        <pre>mapId: "YOUR_MAP_ID"</pre>
      </div>
    </section>

    <footer>
      Created by James at <a href="https://eljamez.com" target="_blank" rel="noopener">eljamez.com</a>
    </footer>
  </div>

  <script>
    (function () {
      var base = window.location.origin + window.location.pathname.replace(/index\.html$/, '').replace(/\/$/, '') || window.location.origin;
      var scriptUrl = base + '/assets/map-plugin.js';
      var placeholder = document.getElementById('script-url-placeholder');
      if (placeholder) placeholder.textContent = scriptUrl;

      var copyBtn = document.getElementById('copy-btn');
      var copyBtnText = document.getElementById('copy-btn-text');

      function getEmbedCode() {
        var div = '<div id="sqs-map-container" style="width: 100%; height: 480px;"></div>\n\n';
        var config = '<script>\n  window.MapPluginConfig = {\n    sheetId: "YOUR_SHEET_ID",\n    apiKey: "YOUR_GOOGLE_MAPS_API_KEY",\n    mapContainerId: "sqs-map-container",\n    zoomLevel: 10\n  };\n</script>\n';
        var script = '<script src="' + scriptUrl + '" defer></script>';
        return div + config + script;
      }

      if (copyBtn) {
        copyBtn.addEventListener('click', function () {
          var code = getEmbedCode();
          navigator.clipboard.writeText(code).then(function () {
            copyBtn.classList.add('copied');
            copyBtnText.textContent = 'Copied!';
            setTimeout(function () {
              copyBtn.classList.remove('copied');
              copyBtnText.textContent = 'Copy embed code';
            }, 2000);
          }).catch(function () {
            copyBtnText.textContent = 'Copy failed';
            setTimeout(function () { copyBtnText.textContent = 'Copy embed code'; }, 2000);
          });
        });
      }
    })();
  </script>
</body>
</html>
